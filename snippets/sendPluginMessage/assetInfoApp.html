<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Html Messages</title>
</head>

<body onload="main()">
</body>

<script>

  var bsMessage = new BSMessagePort();

  function main() {
    console.log("=== Starting javascript...");

    bsMessage.onbsmessage = function (msg) {
      if (msg.data["serialNumber"] !== undefined && msg.data["timestamp"] !== undefined && msg.data["filename"] !== undefined) {
        console.log("=== Received plugin message from: " + msg.data["serialNumber"]);

        // Add fields from plugin message
        var serialNumber = msg.data["serialNumber"];
        var timestamp = msg.data["timestamp"];
        var filename = msg.data["filename"];

        // send info to your backend (example)
        fetch('https://jsonplaceholder.typicode.com/posts', {
          method: 'POST',
          body: JSON.stringify({
            serialNumber,
            filename,
            timestamp
          })
        })
      } else {
        console.log("=== Received unexpected message");
      }
    };
  }

</script>

</html>